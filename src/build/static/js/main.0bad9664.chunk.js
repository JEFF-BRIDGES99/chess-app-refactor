(this["webpackJsonpchess-app-refactor"]=this["webpackJsonpchess-app-refactor"]||[]).push([[0],{31:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(17),o=c.n(s),i=c(8),r=(c(31),c(4)),l=c(0);var d=function(){return Object(l.jsxs)("nav",{className:"navbar",children:[Object(l.jsx)(i.b,{to:"/",exact:!0,activeClassName:"is-active",children:"Home"}),Object(l.jsx)(i.b,{to:"/game",activeClassName:"is-active",children:"Play"}),Object(l.jsx)(i.b,{to:"/history",activeClassName:"is-active",children:"Look up a game"})]})};var b=function(){return Object(l.jsx)("div",{className:"homepage",children:Object(l.jsx)(d,{})})},j=c(20),A=c.n(j),u=c(24),m=c(3),h=c(2),O=c(25),g=a.a.createContext(),f=c(14),p=c(13),v=c.n(p),x=c.p+"static/media/Move.1cf67c4c.ogg",N=c.p+"static/media/Capture.2787600f.ogg",C=c.p+"static/media/Defeat.9f7038bf.ogg";var y=function(e){var t=Object(n.useState)(new v.a),c=Object(m.a)(t,2),a=c[0],s=c[1],o=Object(f.a)(x),i=(Object(m.a)(o,1)[0],Object(f.a)(N)),r=(Object(m.a)(i,1)[0],Object(f.a)(C)),d=(Object(m.a)(r,1)[0],Object(n.useContext)(g)),b=Object(n.useState)(),j=Object(m.a)(b,2),A=j[0],u=j[1],p=Object(n.useState)(),y=Object(m.a)(p,2),k=y[0],R=(y[1],Object(n.useState)()),S=Object(m.a)(R,2);return S[0],S[1],Object(n.useEffect)((function(){fetch("/setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({color:"white",difficulty:0})}).then((function(e){return e.json()})).then((function(e){console.log(e),localStorage.setItem("UUID",JSON.stringify({id:e.id})),u(e.position)}))}),[]),Object(l.jsxs)("div",{className:"board",children:[Object(l.jsx)(O.a,{boardWidth:800,className:"board",id:"mainboard",boardOrientation:d.color,position:A,onPieceDrop:function(e,t){var c,n=null;if(c=function(c){n=c.move({from:e,to:t,promotion:"q"})},s((function(e){var t=Object(h.a)({},e);return c(t),t})),null===n)return!1;var o={id:JSON.parse(localStorage.getItem("UUID")).id,move:n};return fetch("/move",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){u(e.fen),console.log(a)})),fetch("/ai-move",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){u(e.fen),console.log(a)})),!0},animationDuration:0,arePiecesDraggable:!k}),Object(l.jsx)("div",{className:"fen-string",children:d.gameHistory[d.selectedTurn].fen}),Object(l.jsx)("div",{className:"fen-copy-button",children:Object(l.jsx)("button",{onClick:function(){navigator.clipboard.writeText(d.gameHistory[d.selectedTurn].fen)},children:"Copy FEN String"})})]})},k=c.p+"static/media/flag.710495cc.svg",R=c.p+"static/media/draw.ffd38bd5.svg",S=c.p+"static/media/takeback.228990ee.svg",I=c(26);var Q=function(e){var t=Object(n.useContext)(g),c=Object(n.useRef)(null);Object(n.useEffect)((function(){var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}));var a=function(e){(e>=0||e<=t.gameHistory.length-1)&&t.updateSelectedTurn(e)};return Object(l.jsxs)("div",{className:"scoreboard",children:[Object(l.jsx)("div",{className:"opponent-name",children:"Opponent"}),Object(l.jsx)("div",{className:"scoreboard-header",children:Object(l.jsxs)("div",{className:"button-container",children:[Object(l.jsx)("button",{onClick:function(){"white"===t.color?t.updateColor("black"):t.updateColor("white")},children:Object(l.jsx)("img",{className:"icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAABFklEQVRIie3Uu0oDQRQG4E+IeEEL7cRWIla+gGUq6zxFQN/GQkzrI6RKL4oprASxtE+hi41FLGaWDOuKe3Eb8YcpZub/z23OGf4RcInVLh0sMMVOlw4WeMZRlw4WmGPwHXENZ7hFVhDWWR8YQS8xvo8Jjn8rrWLkD9H7C4bYrqH/sUTnifHdBgHmxp/QLyPcRcKwgfHcQdqmhxinhLdIqlOWFBeW77khlClLCVk8XI/7XhQ1wZYQ7Gt6OBbSIqQ5jaQmOI3am7LLvvBQ+aPVxaZlN46KlwOhTGnLVcUKTnAfdTOFz28kTF9xIucV13uimWEvN5xOchmq/o6ZUPNrXMVgv6BNiSrjAI9dOqB9m1ZCm0H7Y/gEb0JneVpTRn4AAAAASUVORK5CYII=",alt:"flip board"})}),Object(l.jsx)("button",{onClick:function(){a(0)},children:Object(l.jsx)("img",{className:"icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAA8ElEQVRIS+3UvUoDQRTF8V9SKAkKdloIaQK+gR9PkCalpT6CYIqAYNo02ij4UvoMPkwYswvDsNlZQ0YQMuXuued/9+yd21P49Ar72wOyCf82oit8Zl25xFfQdQWM8Ipb9FsAp5XurtblAEdY4AHDyrip5gAzPOEk1m0ChOf3WOI86TitmeAdF026JsB1VRBybDp1TYjtA9M2XQw4wwtCfm3RDaoo5lFsGxsJRod4xDOOO0zIN8YddD9N/gmgbqZYROnX3uDN+rLs9CfHZkXHNAYVu2hpNMVWRQoqtuw6jH37RGxtkCvMbdNcffb9/wesAIMZHBnBqQgGAAAAAElFTkSuQmCC",alt:"beginning"})}),Object(l.jsx)("button",{onClick:function(){a(t.selectedTurn-1)},children:Object(l.jsx)("img",{className:"icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAA5klEQVRIS8XVv0vCQRjH8ZdKIUgQ0RQkNIm0uLS0NEVDjf4DgYNBY4OTIuhmP+gvblE4D9Pz6x3efHzezz3P5z5PTeFTK6wvJ6CDLzyHRecAnGOKN5ywXvQhgAbeMcZFUPWaZlXAA37Q2zDDgwA3+MXLFnNUApxhhiFOdzhvL0AdA0xwlWjpZMD9ss93icKrazsB1/hEP7ZcIuhfQBMjfKCVKLbp2vEAq2raWJRoUfzcYkMOQUVtGoKKfbS4bcWiIgY94Rvd3GEX6hWN6xB0iTlecy+cuDu3y+x6zL0yt6ZK1Y2WHFV/X2kUGd8DaYQAAAAASUVORK5CYII=",alt:"back"})}),Object(l.jsx)("button",{onClick:function(){a(t.selectedTurn+1)},children:Object(l.jsx)("img",{className:"icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAn0lEQVRIid3UIRJBURiG4WcoihlBZUYS7EAR7US1BVsQbUE1kh0omh2ImuIGVzCnKeb6At/MW7935j/n//nHHDBJCmpU2KCfEhSuWKKdEhTOmCcFhR1GSUGNO9bopgSFCxZopQSFI6ZJQY0HthimBIUbVuiUso/n9400GdEgIYg9cuybRhctdipOmDUtfieInevKa869bxaX7DFOFP9mnk7UnOofmTjvAAAAAElFTkSuQmCC",alt:"forward"})}),Object(l.jsx)("button",{onClick:function(){a(t.gameHistory.length-1)},children:Object(l.jsx)("img",{className:"icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAnklEQVRIie3UPQ5BQRTF8R8FCr3X2YWPFdiFbWiVbx1KrVXYgURpARKJFgVTKHgzLyYS3klO909O7rkzl0Z/pVEkN64bcMEKgwhujWFqwPXhIxboVHBnlOinBgTvMIvgDpijlRoQvPFcxytui2mdgFDHEr0KLuyxSA0I3kdyJ/c9dtvvRvq0vlZRypInKRNke6bZPlr2U5H92DX6Ud0AK2d8gyBBlnEAAAAASUVORK5CYII=",alt:"end"})})]})}),Object(l.jsxs)("div",{className:"scoreboard-body",children:[Object(l.jsxs)("div",{className:"match-history",children:[t.game.history().reduce((function(e,t,c,n){return c%2===0&&e.push(n.slice(c,c+2)),e}),[]).map((function(e,t){return Object(l.jsxs)("div",{className:"history-move",children:[Object(l.jsx)("div",{className:"turn-number",children:t+1}),Object(l.jsx)("div",{className:"history-white-move",children:e[0]}),Object(l.jsx)("div",{className:"history-black-move",children:e[1]})]},Object(I.a)())})),Object(l.jsx)("div",{className:"dummy-scroll-div",ref:c})]}),Object(l.jsxs)("div",{className:"control-buttons",children:[Object(l.jsx)("button",{children:Object(l.jsx)("img",{className:"icon",src:k,alt:"surrender"})}),Object(l.jsx)("button",{onClick:function(){0!==t.gameHistory.length&&(t.game.undo(),a(t.selectedTurn-1),t.gameHistory.pop()),console.log(t.game)},children:Object(l.jsx)("img",{className:"icon",src:S,alt:"takeback"})}),Object(l.jsx)("button",{children:Object(l.jsx)("img",{className:"icon",src:R,alt:"offer draw"})})]})]}),Object(l.jsx)("div",{className:"scoreboard-footer"}),Object(l.jsx)("div",{className:"player-name",children:"Player"})]})};c(44);var U=function(e){var t=Object(n.useState)(new v.a),c=Object(m.a)(t,2),a=c[0],s=c[1],o=Object(n.useState)([{fen:a.fen(),score:0}]),i=Object(m.a)(o,2),r=i[0],b=i[1],j=Object(n.useState)(),h=Object(m.a)(j,2),O=h[0],f=h[1],p=Object(n.useState)(0),x=Object(m.a)(p,2),N=x[0],C=x[1],k=function(e){var t=0,c=e.split("/");c[7]=c[7].split(" ")[0];for(var n=0;n<c.length;n++)for(var a=0;a<c[n].length;a++)switch(c[n].charAt(a)){case"p":t-=1;break;case"r":t-=5;break;case"n":case"b":t-=3;break;case"q":t-=9;break;case"P":t+=1;break;case"R":t+=5;break;case"N":case"B":t+=3;break;case"Q":t+=9}return t},R=function(){var e=Object(u.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("/post-game",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.statusCode}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S={game:a,color:O,gameHistory:r,selectedTurn:N,updateGame:function(e){s(e)},updateColor:function(e){f(e)},updateGameHistory:function(e){if(r[r.length-1]!==e){var t=r;t.push({fen:e,score:k(e)}),b(t)}},updateSelectedTurn:function(e){0<=e&&e<=r.length-1&&C(e)}};return Object(l.jsx)(g.Provider,{value:S,children:Object(l.jsxs)("div",{className:"game",children:[Object(l.jsx)(d,{}),Object(l.jsxs)("div",{className:"main-container",children:[Object(l.jsx)(y,{score:k,game:r[N],postGame:R}),Object(l.jsx)(Q,{})]})]})})};var w=function(){return Object(l.jsxs)("div",{className:"history",children:[Object(l.jsx)("div",{className:"game-lookup-container",children:Object(l.jsx)(U,{color:"white"})}),Object(l.jsx)("button",{onClick:function(){fetch("/retrieve-game",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))},children:"Lookup game"}),Object(l.jsx)("button",{onClick:function(){fetch("/current-game",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))},children:"Get server's current game"})]})};var T=function(){return Object(l.jsx)("div",{className:"app",children:Object(l.jsxs)(r.c,{children:[Object(l.jsx)(r.a,{path:"/",component:b,exact:!0}),Object(l.jsx)(r.a,{path:"/game",component:U,exact:!0}),Object(l.jsx)(r.a,{path:"/history",component:w,exact:!0})]})})};o.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(i.a,{children:Object(l.jsx)(T,{})})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.0bad9664.chunk.js.map