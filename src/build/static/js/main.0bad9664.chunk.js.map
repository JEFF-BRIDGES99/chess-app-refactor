{"version":3,"sources":["client/components/Navbar.js","client/components/Homepage.js","client/components/ChessContext.js","client/sounds/Move.ogg","client/sounds/Capture.ogg","client/sounds/Defeat.ogg","client/components/Board.js","client/images/flag.svg","client/images/draw.svg","client/images/takeback.svg","client/components/Scoreboard.js","client/images/flip.png","client/images/begin.png","client/images/back.png","client/images/play.png","client/images/ff.png","client/components/Game.js","client/components/History.js","client/components/App.js","index.js"],"names":["Navbar","className","to","exact","activeClassName","Homepage","ChessContext","React","createContext","Board","props","useState","Chess","game","setGame","useSound","move","capture","defeat","ctx","useContext","position","setPosition","gameOver","useEffect","fetch","method","headers","body","JSON","stringify","color","difficulty","then","res","json","console","log","localStorage","setItem","id","boardWidth","boardOrientation","onPieceDrop","sourceSquare","targetSquare","modify","from","promotion","g","update","BODY","parse","getItem","fen","animationDuration","arePiecesDraggable","gameHistory","selectedTurn","onClick","navigator","clipboard","writeText","Scoreboard","scrollRef","useRef","current","scrollIntoView","behavior","handleClick","turn","length","updateSelectedTurn","updateColor","src","alt","history","reduce","result","value","index","array","push","slice","map","nanoid","ref","flag","undo","pop","takeback","draw","Game","score","setGameHistory","setColor","setSelectedTurn","fenArray","split","i","j","charAt","postGameToServer","data","a","response","statusCode","globals","updateGame","updateGameHistory","newHistory","Provider","postGame","History","App","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0bad9664.chunk.js","sourcesContent":["import { NavLink } from 'react-router-dom'\n\nfunction Navbar() {\n\n    return(\n        <nav className=\"navbar\">\n            <NavLink to=\"/\" exact={true} activeClassName=\"is-active\">Home</NavLink>\n            <NavLink to=\"/game\" activeClassName=\"is-active\">Play</NavLink>\n            <NavLink to=\"/history\" activeClassName=\"is-active\">Look up a game</NavLink>\n        </nav>\n    );\n}\n\nexport default Navbar;\n\n","import Navbar from './Navbar'\n\n\nfunction Homepage() {\n    return (\n        <div className=\"homepage\">\n            <Navbar/>\n        </div>\n    );\n}\n\nexport default Homepage;","import React from 'react';\n\nconst ChessContext = React.createContext();\n\nexport default ChessContext;","export default __webpack_public_path__ + \"static/media/Move.1cf67c4c.ogg\";","export default __webpack_public_path__ + \"static/media/Capture.2787600f.ogg\";","export default __webpack_public_path__ + \"static/media/Defeat.9f7038bf.ogg\";","import { useContext, useEffect, useState } from 'react';\nimport { Chessboard } from 'react-chessboard';\nimport ChessContext from './ChessContext';\nimport useSound from 'use-sound';\nimport Chess from 'chess.js'\n\nimport move from '../sounds/Move.ogg';\nimport capture from '../sounds/Capture.ogg';\nimport defeat from '../sounds/Defeat.ogg';\n\nfunction Board(props) {\n\n    const [game, setGame] = useState(new Chess());\n\n    const [moveSFX] = useSound(move);\n    const [captureSFX] = useSound(capture);\n    const [defeatSFX] = useSound(defeat);\n\n    const ctx = useContext(ChessContext);\n\n    const [position, setPosition] = useState();\n    const [gameOver, setGameOver] = useState();\n    const [currentTurn, setCurrentTurn] = useState();\n    \n    useEffect(() => { /** Set up the board based on whatever game the server currently has */\n\n        // const UUID = JSON.parse(localStorage.getItem('UUID'));\n\n        fetch(\"/setup\", {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ color: 'white', difficulty: 0 })\n        })\n        .then(res => res.json())\n        .then(json => {\n          console.log(json);\n          localStorage.setItem('UUID', JSON.stringify({ id: json.id }))\n          setPosition(json.position);\n        });\n\n    }, []);\n\n    function safeGameMutate(modify) {\n        setGame((g) => {\n          const update = { ...g };\n          modify(update);\n          return update;\n        });\n      }\n\n    function onDrop(sourceSquare, targetSquare) {\n        let move = null;\n        safeGameMutate((game) => {\n          move = game.move({\n            from: sourceSquare,\n            to: targetSquare,\n            promotion: 'q' // always promote to a queen for example simplicity\n          });\n        });\n        if (move === null) return false; // illegal move\n\n        const BODY = { id: JSON.parse(localStorage.getItem('UUID')).id, move: move};\n        \n        // Make move\n        fetch(\"/move\", {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(BODY)\n        })\n        .then(res => res.json())\n        .then(json => {\n          setPosition(json.fen);\n          //setGame(...game);\n          console.log(game)\n        });\n\n        // Get AI move\n        fetch(\"/ai-move\", {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(BODY)\n      })\n      .then(res => res.json())\n      .then(json => {\n        setPosition(json.fen);\n        //setGame(...game);\n        console.log(game)\n      });\n\n\n// TODO: use setGame to make sure turns are handled properly\n\n        return true;\n      }\n\n    return (\n        <div className='board'> \n            <Chessboard \n            boardWidth={800}\n            className='board'\n            id='mainboard'\n            boardOrientation={ctx.color}\n            position={position}\n            onPieceDrop={onDrop}\n            animationDuration={0}\n            arePiecesDraggable={!gameOver}\n            />\n            <div className='fen-string'>{ctx.gameHistory[ctx.selectedTurn].fen}</div>\n            <div className='fen-copy-button'><button onClick={() => {navigator.clipboard.writeText(ctx.gameHistory[ctx.selectedTurn].fen)}}>Copy FEN String</button></div>\n        </div>\n        \n    );\n}\n\nexport default Board;","export default __webpack_public_path__ + \"static/media/flag.710495cc.svg\";","export default __webpack_public_path__ + \"static/media/draw.ffd38bd5.svg\";","export default __webpack_public_path__ + \"static/media/takeback.228990ee.svg\";","import flip from '../images/flip.png';\nimport back from '../images/back.png';\nimport begin from '../images/begin.png';\nimport play from '../images/play.png';\nimport ff from '../images/ff.png';\nimport flag from '../images/flag.svg';\nimport draw from '../images/draw.svg';\nimport takeback from '../images/takeback.svg';\nimport { useContext, useEffect, useRef } from 'react';\nimport { nanoid } from 'nanoid';\n\nimport ChessContext from './ChessContext';\n\nfunction Scoreboard(props) {\n\n    const ctx = useContext(ChessContext);\n    const scrollRef = useRef(null);\n\n    useEffect(() => {\n        scrollRef.current?.scrollIntoView({ behavior: \"smooth\" });\n    });\n\n    const handleFlip = () => {\n        if (ctx.color === 'white') {\n            ctx.updateColor('black');\n        } else {\n            ctx.updateColor('white');\n        }\n    }\n\n    const handleClick = (turn) => {\n        if (turn >= 0 || turn <= ctx.gameHistory.length - 1)\n        ctx.updateSelectedTurn(turn);\n    }\n\n    const handleTakeback = () => {\n        if (ctx.gameHistory.length !== 0) {\n            ctx.game.undo(); \n            handleClick(ctx.selectedTurn - 1); \n            ctx.gameHistory.pop();\n        }\n        console.log(ctx.game);\n    }\n\n    const createMatchHistory = () => {\n        \n        let history = ctx.game.history().reduce((result, value, index, array) => {\n            if (index % 2 === 0)\n              result.push(array.slice(index, index + 2));\n            return result;\n          }, []).map((move, index) => {\n            return (\n                <div className='history-move' key={nanoid()}>\n\t                <div className='turn-number'>{index + 1}</div><div className='history-white-move'>{move[0]}</div><div className='history-black-move'>{move[1]}</div>\n                </div>\n            );\n          })\n        return history;\n    }\n\n    return(\n        <div className='scoreboard'>\n            <div className='opponent-name'>\n                Opponent\n            </div>\n            <div className='scoreboard-header'>\n                <div className='button-container'>\n                    <button onClick={handleFlip}><img className='icon' src={flip} alt='flip board'></img></button>\n                    <button onClick={() => {handleClick(0)}}><img className='icon' src={begin} alt='beginning' ></img></button>\n                    <button onClick={() => {handleClick(ctx.selectedTurn - 1)}}><img className='icon' src={back} alt='back'></img></button>\n                    <button onClick={() => {handleClick(ctx.selectedTurn + 1)}}><img className='icon' src={play} alt='forward'></img></button>\n                    <button onClick={() => {handleClick(ctx.gameHistory.length - 1)}}><img className='icon' src={ff} alt='end'></img></button>\n                </div>\n            </div>\n            <div className='scoreboard-body'>\n                <div className='match-history'>\n                    {createMatchHistory()}\n                    <div className='dummy-scroll-div' ref={scrollRef}/>\n                </div>\n\n            <div className='control-buttons'>\n                <button><img className='icon' src={flag} alt='surrender'></img></button>\n                <button onClick={() => {handleTakeback()}} ><img className='icon' src={takeback} alt='takeback'></img></button>\n                <button><img className='icon' src={draw} alt='offer draw'></img></button>\n            </div>\n\n            </div>\n            <div className='scoreboard-footer'>\n\n            </div>\n            <div className='player-name'>\n                Player\n            </div>\n        </div>\n    );\n}\n\nexport default Scoreboard;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAABFklEQVRIie3Uu0oDQRQG4E+IeEEL7cRWIla+gGUq6zxFQN/GQkzrI6RKL4oprASxtE+hi41FLGaWDOuKe3Eb8YcpZub/z23OGf4RcInVLh0sMMVOlw4WeMZRlw4WmGPwHXENZ7hFVhDWWR8YQS8xvo8Jjn8rrWLkD9H7C4bYrqH/sUTnifHdBgHmxp/QLyPcRcKwgfHcQdqmhxinhLdIqlOWFBeW77khlClLCVk8XI/7XhQ1wZYQ7Gt6OBbSIqQ5jaQmOI3am7LLvvBQ+aPVxaZlN46KlwOhTGnLVcUKTnAfdTOFz28kTF9xIucV13uimWEvN5xOchmq/o6ZUPNrXMVgv6BNiSrjAI9dOqB9m1ZCm0H7Y/gEb0JneVpTRn4AAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAA8ElEQVRIS+3UvUoDQRTF8V9SKAkKdloIaQK+gR9PkCalpT6CYIqAYNo02ij4UvoMPkwYswvDsNlZQ0YQMuXuued/9+yd21P49Ar72wOyCf82oit8Zl25xFfQdQWM8Ipb9FsAp5XurtblAEdY4AHDyrip5gAzPOEk1m0ChOf3WOI86TitmeAdF026JsB1VRBybDp1TYjtA9M2XQw4wwtCfm3RDaoo5lFsGxsJRod4xDOOO0zIN8YddD9N/gmgbqZYROnX3uDN+rLs9CfHZkXHNAYVu2hpNMVWRQoqtuw6jH37RGxtkCvMbdNcffb9/wesAIMZHBnBqQgGAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAA5klEQVRIS8XVv0vCQRjH8ZdKIUgQ0RQkNIm0uLS0NEVDjf4DgYNBY4OTIuhmP+gvblE4D9Pz6x3efHzezz3P5z5PTeFTK6wvJ6CDLzyHRecAnGOKN5ywXvQhgAbeMcZFUPWaZlXAA37Q2zDDgwA3+MXLFnNUApxhhiFOdzhvL0AdA0xwlWjpZMD9ss93icKrazsB1/hEP7ZcIuhfQBMjfKCVKLbp2vEAq2raWJRoUfzcYkMOQUVtGoKKfbS4bcWiIgY94Rvd3GEX6hWN6xB0iTlecy+cuDu3y+x6zL0yt6ZK1Y2WHFV/X2kUGd8DaYQAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAn0lEQVRIid3UIRJBURiG4WcoihlBZUYS7EAR7US1BVsQbUE1kh0omh2ImuIGVzCnKeb6At/MW7935j/n//nHHDBJCmpU2KCfEhSuWKKdEhTOmCcFhR1GSUGNO9bopgSFCxZopQSFI6ZJQY0HthimBIUbVuiUso/n9400GdEgIYg9cuybRhctdipOmDUtfieInevKa869bxaX7DFOFP9mnk7UnOofmTjvAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAnklEQVRIie3UPQ5BQRTF8R8FCr3X2YWPFdiFbWiVbx1KrVXYgURpARKJFgVTKHgzLyYS3klO909O7rkzl0Z/pVEkN64bcMEKgwhujWFqwPXhIxboVHBnlOinBgTvMIvgDpijlRoQvPFcxytui2mdgFDHEr0KLuyxSA0I3kdyJ/c9dtvvRvq0vlZRypInKRNke6bZPlr2U5H92DX6Ud0AK2d8gyBBlnEAAAAASUVORK5CYII=\"","import Board from './Board';\nimport Navbar from './Navbar';\n// import Sidebar from './Sidebar';\nimport Scoreboard from './Scoreboard';\nimport ChessContext from './ChessContext';\n\nimport '../css/App.css';\nimport { useState } from 'react';\nimport Chess from 'chess.js';\n\n\n\nfunction Game(props) {\n\n    // Initialize game\n    const [game, setGame] = useState(new Chess());\n    const [gameHistory, setGameHistory] = useState([{fen: game.fen(), score: 0}]);\n\n    // Start as a random color\n    const [color, setColor] = useState();\n    const [selectedTurn, setSelectedTurn] = useState(0);\n\n    const score = (fen) => {\n        let score = 0;\n        const fenArray = fen.split('/');\n        fenArray[7] = fenArray[7].split(' ')[0];\n        for (let i = 0; i < fenArray.length; i++) {\n            for (let j = 0; j < fenArray[i].length; j++) {\n                switch (fenArray[i].charAt(j)) {\n                    case 'p':\n                        score -= 1;\n                        break;\n                    case 'r':\n                        score -= 5;\n                        break;\n                    case 'n':\n                        score -= 3;\n                        break;\n                    case 'b':\n                        score -= 3;\n                        break;\n                    case 'q':\n                        score -= 9;\n                        break;\n                    case 'P':\n                        score += 1;\n                        break;\n                    case 'R':\n                        score += 5;\n                        break;\n                    case 'N':\n                        score += 3;\n                        break;\n                    case 'B':\n                        score += 3;\n                        break;\n                    case 'Q':\n                        score += 9;\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n        return score;\n    };\n\n    // TODO: add a match history browser\n\n    // TODO: fix undo bug\n\n    const postGameToServer = async (data) => {\n        fetch(\"/post-game\", {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(data)\n        })\n        .then(response => response.statusCode);\n    }\n\n    const updateGame = (g) => {\n        setGame(g);\n    }\n\n    const updateGameHistory = (g) => {\n        if (gameHistory[gameHistory.length - 1] === g) return;\n        let newHistory = gameHistory;\n        newHistory.push({fen: g, score: score(g)});\n        setGameHistory(newHistory);\n    }\n\n    const updateColor = (color) => {\n        setColor(color);\n    }\n\n    const updateSelectedTurn = (turn) => {\n        if (0 <= turn && turn <= gameHistory.length - 1) {\n            setSelectedTurn(turn);\n        }\n    }\n    \n    const globals = {\n        game: game,\n        color: color,\n        gameHistory: gameHistory,\n        selectedTurn: selectedTurn,\n        updateGame,\n        updateColor,\n        updateGameHistory,\n        updateSelectedTurn,\n    };\n\n    return (\n        <ChessContext.Provider value={globals}>\n            <div className=\"game\">\n                <Navbar/>\n                <div className='main-container'>\n                    <Board score={score} game={gameHistory[selectedTurn]} postGame={postGameToServer}/>\n                    <Scoreboard/>\n                </div>\n            </div>\n        </ChessContext.Provider>\n    );\n}\n\nexport default Game;\n","import Game from './Game';\n\nfunction History() {\n    \n    function lookup(history) {\n        fetch(\"/retrieve-game\", {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n            }\n        })\n        .then(res => res.json())\n        .then(json => console.log(json));\n    }   \n\n    function getServerGame() {\n       fetch(\"/current-game\", {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n            }\n        })\n        .then(res => res.json())\n        .then(json => console.log(json));\n    } \n\n    return (\n        <div className=\"history\">\n            <div className=\"game-lookup-container\">\n                <Game color=\"white\"/>\n            </div>\n            <button onClick={() => lookup('example')}>Lookup game</button>\n            <button onClick={() => getServerGame()}>Get server's current game</button>\n        </div>\n    );\n}\n\nexport default History;","import { Switch, Route } from 'react-router-dom';\n\nimport Homepage from './Homepage'\nimport Game from './Game'\nimport History from './History'\n\nfunction App() {\n    return (\n        <div className=\"app\">\n            <Switch>\n                <Route path=\"/\" component={Homepage} exact></Route>\n                <Route path=\"/game\" component={Game} exact></Route>\n                <Route path=\"/history\" component={History} exact></Route>\n            </Switch>\n        </div>\n    );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom'\nimport './client/css/index.css';\nimport App from './client/components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}